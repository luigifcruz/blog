<!doctype html><html lang=en><head><title>Receiving & Demodulating the Meteor Satellite :: Luigi Cruz — Computer Engineering Student. Radio Amateur (PU2SPY). Interested in Rockets, Satellites and Machine Learning.</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="In the previous post, I talked about how I got the analog APT earth images from the NOAA sats and how I made my QFH Antenna. As I said, the APT signal is a legacy image transmission method from the 1960s that have strong drawbacks. The newest sats like Meteor-M and MetOp-A have a new protocol with digital modulation called LRPT (Low Rate Picture Transfer). Currently the single sat transmitting this protocol is the Meteor-MN2 and occasionally the Meteor-MN1."><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://test.luigi.ltd/2017-07-10/receiving-demodulating-the-meteor-satellite/><link rel=stylesheet href=https://test.luigi.ltd/assets/style.css><link rel=stylesheet href=https://test.luigi.ltd/assets/pink.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://test.luigi.ltd/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://test.luigi.ltd/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content="https://twitter.com/luigifcruz"><meta name=twitter:creator content="luigifcruz"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Receiving & Demodulating the Meteor Satellite :: Luigi Cruz"><meta property="og:description" content="In the previous post, I talked about how I got the analog APT earth images from the NOAA sats and how I made my QFH Antenna. As I said, the APT signal is a legacy image transmission method from the 1960s that have strong drawbacks. The newest sats like Meteor-M and MetOp-A have a new protocol with digital modulation called LRPT (Low Rate Picture Transfer). Currently the single sat transmitting this protocol is the Meteor-MN2 and occasionally the Meteor-MN1."><meta property="og:url" content="https://test.luigi.ltd/2017-07-10/receiving-demodulating-the-meteor-satellite/"><meta property="og:site_name" content="Receiving & Demodulating the Meteor Satellite"><meta property="og:image" content="https://test.luigi.ltd/favicon.ico"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2017-07-10 00:00:00 +0000 UTC"></head><body><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Luigi Cruz</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about>About</a></li><li><a href=/contact>Contact</a></li><li><a href=/projects>Projects</a></li><li><a href=/talks>Talks</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about>About</a></li><li><a href=/contact>Contact</a></li><li><a href=/projects>Projects</a></li><li><a href=/talks>Talks</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=https://test.luigi.ltd/2017-07-10/receiving-demodulating-the-meteor-satellite/>Receiving & Demodulating the Meteor Satellite</a></h1><div class=post-meta><span class=post-date>2017-07-10</span>
<span class=post-author>::
Luigi Cruz</span></div><div class=post-content><div><p>In the previous post, I talked about how I got the analog APT earth images from the NOAA sats and how I made my QFH Antenna. As I said, the APT signal is a legacy image transmission method from the 1960s that have strong drawbacks. The newest sats like Meteor-M and MetOp-A have a new protocol with digital modulation called LRPT (Low Rate Picture Transfer). Currently the single sat transmitting this protocol is the Meteor-MN2 and occasionally the Meteor-MN1. Sadly, the LRPT in the MetOp-A satellite is permanently deactivated after cause interference with the HIRS instrument.</p><p><img src=images/meteor-lrpt-cities.png alt="Meteor-M image of South America"></p><p>The only satellites set to launch which will support LRPT is the next generation of Russian’s Meteor, the Meteor-M N2–1 and Meteor-M 2–2 later this year. The next generation of U.S. polar-orbiting satellites will use a similar protocol called LRD (Low Rate Data) which use a much higher frequency and bandwidth that require a trackable RHCP dish, just like the current HRPT.</p><h2 id=apt-vslrpt>APT vs LRPT<a href=#apt-vslrpt class=hanchor arialabel=Anchor>&#8983;</a></h2><p>The practical difference between them is the final image resolution and the number of images channels. The LRPT have three digital channels, each pixel of the image corresponds to one kilometer or 0.62 miles of land. By another hand, the APT just have two analog channels, an image resolution 4x smaller and it’s highly susceptible to interference.</p><p><img src=images/apt-frame-diagram.gif alt="APT Frame Diagram"></p><p>The technical differences are the modulation. The LRPT is a modern digital Quadrature Phase-Shift Keying (<a href=https://en.wikipedia.org/wiki/Phase-shift_keying>QPSK</a>) signal transmitted at an 80 kiloBaud rate. This and the data scrambling make the signal more homogeneous by better distributing the energy through the beam, improving the efficiency and avoiding loose synchronization with the receiver. The LRPT also use error correction techniques, like Convolutional Coding and Reed-Solomon to validate and avoid loosing packages.</p><p>The APT is an analog signal with a much simpler structure with no error correction. This makes the signal highly susceptible to interferences, which are very common in 137 Mhz.</p><h2 id=receiving-thesignal>Receiving the Signal<a href=#receiving-thesignal class=hanchor arialabel=Anchor>&#8983;</a></h2><p>For this, I used the same QFH Antenna that I used to receive the APT Signal. This is possible because the LRPT Signal is transmitted in the same VHF frequency (137 MHz) and is RHCP too. The only difference between them is the bandwidth. The LRPT will look like random noise.</p><p><img src=images/lrpt-fft-signal.png alt="The LRPT signal in SDR#"></p><p>The software to record the LRPT signal was the main problem that I had. The recommended software to do that is the <a href=http://airspy.com/download/>SDR#</a>, which only works with Windows. As a macOS user, I used a VMWare Windows Virtual Machine to run the program, but the result was a crappy image full of missing frames. The problem could be caused by the VM USB driver or the CPU speed with virtualization.</p><p><img src=images/corrupted-lrpt-image.png alt="Awful Meteor-M LRPT Image"></p><p>After testing with other versions of Windows, I gave up the Virtual Machine and installed the Windows 7 with Bootcamp. It worked flawlessly and I was Finally able to record a great Meteor-MN2 pass over South America. The full RAW image can be found <a href=https://cdn.luigifreitas.me/essays/1486860532514.bmp>here</a>.</p><p><img src=images/enhanced-lrpt-image-south-america.jpeg alt="Enhanced Meteor-MN2 Image"></p><h2 id=signal-demodulation>Signal Demodulation<a href=#signal-demodulation class=hanchor arialabel=Anchor>&#8983;</a></h2><p>There are a bunch of software out there to demodulate this signal. I had more success with the <a href=http://www.rtl-sdr.ru/page/komplekt-plaginov-dlja-priema-sputnikov>QPSK Demodulator Plugin</a> for the SDR#. It’s simple to use and makes a good job. You even get a real-time QPSK constellation. The only downside is that it take a while to lock into the signal, so you end up losing some frames. If you are on a slow computer, you could loose some frames, as it runs side-by-side with the SDR#.
The other solution is to record the WAV 16-bit PCM I/Q signal with the built-in SDR# plugin, resample the audio file to 130000 Sps with Audible or SoX and finally process the file with the Paul’s “LrptRx”. The major drawback is the 2GB maximum WAV file size, which is easily achievable. To solve this problem I installed another plugin called <a href=http://www.rtl-sdr.ru/page/dobavlen-novyj-plagin-if-recorder>IF Recorder</a> (original, isn’t it?) that can record a RIFF 64 audio file up to 16 Exabytes.</p><h2 id=getting-theimages>Getting the Images<a href=#getting-theimages class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Both of the methods above output a binary RAW file which is the bitstream sent from the satellite. This file has all the image bits that have to be processed by another program to finally became an image. I won’t discuss the entire process in this essay, but everything is almost compliant with the CCSDS standard.</p><p><img src=images/processing-lrpt-image.png alt="LRPT Offline Decoding Working"></p><p>By far, the best software to process these binary files is the Oleg’s “LRPT Offline Decoder” available for download <a href=http://meteor.robonuka.ru/for-experts/new-lrpt-analizer/>here</a>. The decoder will read the file and generate three images from the virtual channels. It also combines the three images to generate an awesome RGB colored image. There is also an option to save the image with lossless BMP or ordinary JPEG.</p><h2 id=enhancing-thephoto>Enhancing the Photo<a href=#enhancing-thephoto class=hanchor arialabel=Anchor>&#8983;</a></h2><p>The colored image generated have some colors distortions, this can be easily fixed by using the <a href=http://www.satsignal.eu/software/LRPT-processor.html>LRPT Image Processor</a>. This program fixes the colors deviations and further process the image to create more images. Finally, more enhancements can be made in the photoshop, like color adjustments, contrast, brightness and even the black lines of dropped frames can be erased.
Bonus: Download here my RAW binary file from the Meteor-MN2.</p><h2 id=next-up-gnuradio>Next up: GNU Radio!<a href=#next-up-gnuradio class=hanchor arialabel=Anchor>&#8983;</a></h2><p>I’m in the final stages of developing a GNU Radio script to demodulate the LRPT WAV file. I’ll tell more about it in my next essay in the coming days.</p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://test.luigi.ltd/2017-08-04/outernet-receiver-with-a-wifi-grid-antenna/><span class=button__icon>←</span>
<span class=button__text>Outernet Receiver with a Wifi Grid Antenna</span></a></span>
<span class="button next"><a href=https://test.luigi.ltd/2017-01-30/quadrifilar-antenna-for-noaa-apt-satellites/><span class=button__text>Quadrifilar Antenna for NOAA APT Satellites</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2020 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=https://test.luigi.ltd/assets/main.js></script><script src=https://test.luigi.ltd/assets/prism.js></script></div></body></html>